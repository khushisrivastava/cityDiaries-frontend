(this.webpackJsonppranrate=this.webpackJsonppranrate||[]).push([[8],{113:function(e,t,n){"use strict";n.r(t);var a=n(54),r=n(55),o=n(69),c=n(68),i=n(0),u=n.n(i),l=n(19),s=n.n(l),d=(n(87),n(10)),f=n(38),m=n(2),p=n(120),b=n(121),v=(n(88),n(50)),h=n(22),g=n(75);var y=function(e,t){var n=e.component,a=Object(g.a)(e,["component"]),r=Object(h.b)().token;return u.a.createElement(m.b,Object.assign({},a,{render:function(e){return null!==r?u.a.createElement(n,Object.assign({},a,e)):u.a.createElement(m.a,{to:{pathname:"/login",state:{referer:e.location}}})}}))};function j(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var O={useWindowDimensions:function(){var e=Object(i.useState)(j()),t=Object(d.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){function e(){a(j())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}};n(93);n(94);var w=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(20)]).then(n.bind(null,359))}));var E=function(e){return u.a.createElement("div",{className:"splash-view"},u.a.createElement("h4",{className:"heading"},"CityDiaries"),u.a.createElement("h6",{className:"content"},"Find the most hygienic places near you"),u.a.createElement(w,e))},S=Object(i.lazy)((function(){return Promise.all([n.e(1),n.e(3),n.e(30)]).then(n.bind(null,461))})),k=Object(i.lazy)((function(){return Promise.all([n.e(1),n.e(3),n.e(24)]).then(n.bind(null,426))})),P=Object(i.lazy)((function(){return Promise.all([n.e(1),n.e(3),n.e(31)]).then(n.bind(null,427))})),L=Object(i.lazy)((function(){return Promise.all([n.e(1),n.e(3),n.e(5),n.e(12),n.e(27)]).then(n.bind(null,457))})),x=Object(i.lazy)((function(){return Promise.all([n.e(1),n.e(3),n.e(16)]).then(n.bind(null,344))})),z=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(11)]).then(n.bind(null,428))})),I=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(22)]).then(n.bind(null,441))})),C=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(23)]).then(n.bind(null,447))})),W=Object(i.lazy)((function(){return n.e(32).then(n.bind(null,448))})),F=Object(p.a)({palette:{primary:{main:"#FFFFFF"},secondary:{main:"#52be80"}}});var A=function(){var e=localStorage.getItem("userToken");e="null"===e?JSON.parse(e):e;var t=Object(i.useState)(e),n=Object(d.a)(t,2),a=n[0],r=n[1],o=Object(i.useState)(null),c=Object(d.a)(o,2),l=c[0],s=c[1],p=Object(i.useState)(null),g=Object(d.a)(p,2),j=g[0],w=g[1],A=Object(i.useState)(null),N=Object(d.a)(A,2),R=N[0],T=N[1],B=Object(i.useState)(null),D=Object(d.a)(B,2),U=D[0],H=D[1],J=O.useWindowDimensions().width,K=Object(i.useState)(!1),q=Object(d.a)(K,2),G=(q[0],q[1]);return Object(i.useEffect)((function(){if(G(!0),s("51.5074"),w("0.1278"),T("London"),H("UK"),null===l||null===j){var e=localStorage.getItem("parnaLat"),t=localStorage.getItem("parnaLng"),n=localStorage.getItem("parnaLoc"),a=localStorage.getItem("parnaCon");e&&t&&n&&a?(s(e),w(t),T(n),H(a)):(s("51.5074"),w("0.1278"),T("London"),H("UK")),G(!1)}}),[]),u.a.createElement("div",{className:"App"},J<800?u.a.createElement(b.a,{theme:F},u.a.createElement(h.a.Provider,{value:{token:a,setToken:function(e){localStorage.setItem("userToken",JSON.stringify(e)),r(e)}}},u.a.createElement(v.a.Provider,{value:{latitude:l,longitude:j,location:R,country:U,setLatitude:s,setLongitude:w,setLocation:T,setCountry:H}},u.a.createElement(f.a,null,u.a.createElement(i.Suspense,{fallback:function(){}},u.a.createElement(m.d,null,u.a.createElement(m.b,{exact:!0,path:"/",component:E}),u.a.createElement(m.b,{exact:!0,path:"/home",component:S}),u.a.createElement(y,{exact:!0,path:"/my-rating",component:k}),u.a.createElement(y,{exact:!0,path:"/favourites",component:P}),u.a.createElement(m.b,{exact:!0,path:"/place/:type/:id",component:L}),u.a.createElement(y,{exact:!0,path:"/rate/:type/:id",component:x}),u.a.createElement(m.b,{exact:!0,path:"/login",component:z}),u.a.createElement(m.b,{exact:!0,path:"/privacy-policy",component:I}),u.a.createElement(m.b,{exact:!0,path:"/terms-of-use",component:C}))))))):u.a.createElement(i.Suspense,{fallback:function(){}},u.a.createElement(W,null)))},N=n(46),R=n(13),T=n(6),B=n(44),D=n(45),U=Object(T.c)({places:B.a,loading:D.a}),H=Object(R.a)({reducer:U}),J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var q=n(74),G=n.n(q),X=n(20),M=n.n(X),$=n(53),Q={apiKey:"AIzaSyD9qolmySWaXB49otknsdHnCaDr9crU0-0",authDomain:"citydiaries-46605.firebaseapp.com",projectId:"citydiaries-46605",storageBucket:"citydiaries-46605.appspot.com",messagingSenderId:"718464157021",appId:"1:718464157021:web:bdd17805479c91b0ae94b4",measurementId:"G-F7HN0RGH7X"};M.a.defaults.baseURL=$.a,M.a.interceptors.request.use((function(e){var t=localStorage.getItem("userToken")?localStorage.getItem("userToken"):"";return e.headers.Authorization=t?"Bearer ".concat(t):"",e}),(function(e){return Promise.reject(e)})),M.a.interceptors.response.use((function(e){return e}),(function(e){return console.log(e.response),Promise.reject(e)}));var V=function(e){Object(o.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"componentWillMount",value:function(){G.a.initializeApp(Q)}},{key:"render",value:function(){return u.a.createElement(N.a,{store:H},u.a.createElement(A,null))}}]),n}(i.Component);s.a.render(u.a.createElement(V,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");J?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):K(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):K(t,e)}))}}()},22:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var a=n(0),r=Object(a.createContext)({token:null,setToken:function(e){}});function o(){return Object(a.useContext)(r)}},44:function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"g",(function(){return p}));var a=n(40),r=n(13),o=n(59),c=n.n(o),i=Object(r.b)({name:"places",initialState:{all:[],selected:{},filtered:[],favourites:[],reviews:[]},reducers:{setPlaces:function(e,t){e.all=t.payload},setPlacesBySearch:function(e,t){e.filtered=t.payload},setPlace:function(e,t){e.selected=c.a.cloneDeep(t.payload)},setFavourites:function(e,t){e.favourites=t.payload},setFavourite:function(e,t){e.favourites=[].concat(Object(a.a)(e.favourites),[t.payload])},setReviews:function(e,t){e.reviews=t.payload},setReview:function(e,t){e.reviews=[].concat(Object(a.a)(e.reviews),[t.payload])}}}),u=i.actions,l=u.setPlaces,s=u.setPlace,d=u.setPlacesBySearch,f=u.setFavourites,m=u.setFavourite,p=u.setReviews;u.setReview;t.a=i.reducer},45:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return i}));var a=n(13),r=Object(a.b)({name:"loading",initialState:!1,reducers:{startLoading:function(e,t){return!0},finishLoading:function(e,t){return!1}}}),o=r.actions,c=o.startLoading,i=o.finishLoading;t.a=r.reducer},50:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var a=n(0),r=Object(a.createContext)({latitude:null,longitude:null,location:null,country:null,setLatitude:function(e){},setLongitude:function(e){},setLocation:function(e){},setCountry:function(e){}});function o(){return Object(a.useContext)(r)}},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a="https://city-diaries-backend.herokuapp.com"},82:function(e,t,n){e.exports=n(113)},87:function(e,t,n){},88:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){}},[[82,9,10]]]);
//# sourceMappingURL=main.3dafe405.chunk.js.map