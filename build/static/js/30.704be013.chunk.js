(this.webpackJsonppranrate=this.webpackJsonppranrate||[]).push([[30],{129:function(e,t,n){"use strict";t.a={defaultGreen:"#219A53",defaultGrey:"grey"}},137:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}))},143:function(e,t,n){"use strict";n.d(t,"f",(function(){return O})),n.d(t,"e",(function(){return j})),n.d(t,"g",(function(){return v})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return y})),n.d(t,"h",(function(){return x})),n.d(t,"b",(function(){return w}));var a=n(135),r=n.n(a),c=n(136),o=n(44),u=n(45),s=n(20),i=n.n(s),l=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(u.c)()),t.prev=1,t.next=4,i.a.get("/maps/places_nearby/?location=".concat(e.location,"&types=").concat(e.types,"&name=").concat(e.name,"&radius=").concat(e.radius));case 4:200===(a=t.sent).status?n(Object(o.e)(a.data.results.sort((function(e,t){return t.rating-e.rating})))):console.log(a.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:n(Object(u.b)());case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n,a){var c,s,l,p;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n(Object(u.c)()),t.prev=1,c=a(),s=e.name,!((l=c.places.all.filter((function(e){return e.name.toLowerCase().includes(s.toLowerCase())}))).length>0)){t.next=9;break}n(Object(o.f)(l.sort((function(e,t){return t.rating-e.rating})))),t.next=13;break;case 9:return t.next=11,i.a.get("/maps/places_nearby/?location=".concat(e.location,"&types=").concat(e.types,"&name=").concat(e.name,"&radius=").concat(e.radius));case 11:200===(p=t.sent).status?n(Object(o.f)(p.data.results.sort((function(e,t){return t.rating-e.rating})))):console.log(p.data);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),console.log(t.t0);case 18:n(Object(u.b)());case 19:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e,n){return t.apply(this,arguments)}}()},f=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(u.c)()),t.prev=1,t.next=4,i.a.get("/maps/places_nearby/?location=".concat(e.location,"&types=").concat(e.types,"&name=&radius=").concat(e.radius));case 4:200===(a=t.sent).status?n(Object(o.e)(a.data.results.sort((function(e,t){return t.rating-e.rating})))):console.log(a.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:n(Object(u.b)());case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n,a){var c,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(u.c)()),t.prev=1,c={place_id:e},t.next=5,i.a.get("/maps/details/?place_id=".concat(c.place_id));case 5:200===(s=t.sent).status?n(Object(o.d)(s.data.result)):console.log(s.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:n(Object(u.b)());case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,n){return t.apply(this,arguments)}}()},d=n(40),g=n(146),O=l,j=p,v=f,m=b,h=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(u.c)()),e.prev=1,e.next=4,i.a.get("/place/fav_places");case 4:200===(n=e.sent).status?(a=n.data.sort((function(e,t){return t.rating-e.rating})),c=a.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{is_favourite:!0})})),t(Object(o.c)(c))):console.log(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:t(Object(u.b)());case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n,a){var c,u,s,l,p,f;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=a(),u=Object(d.a)(c.places.favourites),t.next=5,i.a.post("/place/toggle_fav/",e);case 5:s=t.sent,l=u.filter((function(t){return t.place_id===e.place_id})),e.is_favourite||(e=Object(g.a)(Object(g.a)({},e),{},{is_favourite:!0}),n(Object(o.b)(e))),l.length>0?(p=u.findIndex((function(t){return t.place_id===e.place_id})),u.splice(p,1),f=u.map((function(e){return Object(g.a)(Object(g.a)({},e),{},{is_favourite:!0})})),n(Object(o.c)(f))):200===s.status||console.log(s.data),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},x=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(u.c)()),e.prev=1,e.next=4,i.a.get("/review/review_list/");case 4:200===(n=e.sent).status?t(Object(o.g)(n.data.sort((function(e,t){return t.rating-e.rating})))):console.log(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:t(Object(u.b)());case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(u.c)()),t.prev=1,t.next=4,i.a.post("/review/rate_restaurant/",e);case 4:200===(a=t.sent).status||console.log(a.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:n(Object(u.b)());case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}},146:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(137);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},151:function(e,t,n){"use strict";var a=n(1),r=n(455),c=n(134);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)(e,Object(a.a)({defaultTheme:c.a},t))}},461:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(0),c=n.n(r),o=n(342),u=n(151),s=n(46),i=n(143),l=n(59),p=n.n(l),f=n(53),b=n(50),d=n(129),g=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(4),n.e(26)]).then(n.bind(null,449))})),O=(Object(r.lazy)((function(){return n.e(7).then(n.bind(null,147))})),Object(r.lazy)((function(){return n.e(40).then(n.bind(null,462))}))),j=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(15)]).then(n.bind(null,227))})),v=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(19)]).then(n.bind(null,228))})),m=Object(r.lazy)((function(){return n.e(35).then(n.bind(null,211))})),h=Object(u.a)((function(e){return{heading:{marginTop:10,marginBottom:5,textAlign:"center"},commenText:{display:"flex",justifyContent:"center",alignContent:"center",marginTop:150,marginLeft:15,marginRight:15,color:d.a.defaultGrey,textAlign:"center"}}}));var y={cards:{marginBottom:"60px"}};t.default=function(e){var t=h(),n=Object(r.useState)(!1),u=Object(a.a)(n,2),l=u[0],d=u[1],x=Object(r.useState)("restaurant"),w=Object(a.a)(x,2),_=w[0],k=w[1],E=Object(r.useState)(""),P=Object(a.a)(E,2),S=P[0],z=P[1],A=Object(b.b)(),T=A.latitude,C=A.longitude,D=A.location,F=Object(s.b)(),L=Object(s.c)((function(e){return e.places.all})),R=Object(s.c)((function(e){return e.loading})),B=Object(s.c)((function(e){return e.places.filtered}));Object(r.useEffect)((function(){var e={location:T&&C?"".concat(T,",").concat(C):"",radius:1e4,types:"restaurant",name:""};F(Object(i.f)(e))}),[T,C,F]);var G=p.a.debounce((function(e){d(!0),I(e)}),1e3),I=function(e){if(e.length>0){var t={location:T&&C?"".concat(T,",").concat(C):"",types:_,name:e,radius:1e4};F(Object(i.e)(t))}else J(_),d(!1)},J=function(e){k(e);var t={location:T&&C?"".concat(T,",").concat(C):"",types:e,name:"",radius:1e4};F(Object(i.g)(t)),z(""),d(!1)},N=l?B:L;return c.a.createElement(c.a.Fragment,null,c.a.createElement(r.Suspense,null,c.a.createElement(g,Object.assign({},e,{setTypedAddress:z,typedAddress:S,setSearchQuery:G}))),T&&C?c.a.createElement(c.a.Fragment,null,c.a.createElement(m,{type:_,onTypeChange:J}),c.a.createElement("div",{style:y.cards},R&&c.a.createElement(O,null),N.map((function(t){return c.a.createElement(r.Suspense,null,c.a.createElement(j,Object.assign({},e,{key:t.place_id,place_id:t.place_id,image:t.photos?"".concat(f.a,"/maps/place_photos?maxwidth=",1e3,"&photoreference=").concat(t.photos[0].photo_reference,"&key=").concat("AIzaSyBrtNUacoZ2l7VqPirFuWERg4iRVhwE15o"):t.icon,name:t.name,address:t.vicinity,value:t.avg_ratings,avg_rating:t.avg_ratings,icon:t.icon,photos:t.photos,type:t.type,is_favourite:t.is_favourite,favPage:!1})))})),!N.length&&L.length>0&&c.a.createElement("h5",{style:{textAlign:"center",width:"85%",color:"grey",marginLeft:"auto",marginRight:"auto"}},"Your current location is set to ",D,". Consider changing it to look for hygienic places nearby"),c.a.createElement(r.Suspense,null))):c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,{className:t.commenText},"Oh ho! Please either allow your location or select your location to proceed"),c.a.createElement(r.Suspense,null)),c.a.createElement(r.Suspense,null,c.a.createElement(v,Object.assign({},e,{value:0}))))}}}]);
//# sourceMappingURL=30.704be013.chunk.js.map